<!DOCTYPE html><html lang="pl"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>TvSuper</title>    <style>        body {            margin: 0;            background-color: #0b0b0b;            font-family: Arial, Helvetica, sans-serif;            color: #fff;        }        /* LOGIN */        .login-box {            max-width: 350px;            margin: 120px auto;            background: #111;            padding: 30px;            border-radius: 10px;            text-align: center;        }        .login-box input {            width: 90%;            padding: 12px;            margin-top: 10px;            border-radius: 8px;            border: none;            background: #222;            color: #ccc;        }        .login-box button {            margin-top: 15px;            padding: 12px 20px;            border: none;            border-radius: 8px;            background: #333;            color: #ccc;            cursor: pointer;        }        /* APP */        .app {            display: none;            padding: 20px;        }        .topbar {            display: flex;            align-items: center;            justify-content: space-between;            margin-bottom: 25px;        }        .logo {            font-size: 42px;            font-weight: bold;            color: #e50914;        }		.addons button {			padding: 10px 18px;			border-radius: 20px;			border: none;			background: #2a2a2a;			color: #ccc;			cursor: pointer;			font-size: 14px;			transition: 0.2s;		}		.addons button:hover {			background: #444;		}        .search input {            width: 60%;            max-width: 400px;            padding: 10px 16px;            border-radius: 20px;            border: none;            outline: none;            background: #2a2a2a;            color: #aaa;            font-size: 14px;        }        /* KATEGORIE */        .category {            margin-bottom: 40px;        }        .category h2 {            margin: 0 0 15px 5px;            font-size: 26px;            color: #fff;        }        /* GRID 5 FILMÓW */        .movie-grid {            display: grid;            grid-template-columns: repeat(5, 1fr);            gap: 40px; /* większa przerwa między kafelkami */        }        /* KAFELKI */        .movie {            position: relative;            cursor: pointer;            transition: transform 0.2s;        }        .movie:hover {            transform: scale(1.05);        }        .movie img {            width: 100%;            height: 260px;            object-fit: cover;            border-radius: 10px;        }        /* CZARNE TŁO POD NAPISAMI */        .info {            position: absolute;            bottom: 0;            width: 100%;            padding: 20px;            background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.6), transparent);            border-radius: 0 0 20px 20px;        }        .info p {            margin: 2px 0;            font-size: 14px;        }        .rating {            color: #f5c518;            font-weight: bold;        }    </style></head><body><!-- LOGIN --><div id="login" class="login-box">    <h2>Wpisz hasło</h2>    <input id="passwordInput" type="password" placeholder="hasło...">    <button onclick="checkPassword()">Zaloguj</button>    <p id="loginError" style="color:red; display:none;">Niepoprawne hasło</p></div><!-- APP --><div id="app" class="app">    <div class="topbar">		<div class="logo">TvSuper</div>		<div class="search">			<input id="searchInput" type="text" placeholder="szukaj filmu...">		</div>		<div class="addons">			<button onclick="window.location.href='addons.html'">ADDONS</button>		</div></div>    <div id="content"></div></div><script>const MASTER_KEY = "$2a$10$gYn6RI7zmyY4F2EVTo1oOuoMmPmi9SxaNVNm1Y4.XJQrRFX8ZIKnS";const MOVIES_URL = "https://api.jsonbin.io/v3/b/6981d78f43b1c97be961f419/latest";const PASSWORD_URL = "https://api.jsonbin.io/v3/b/6981e62b43b1c97be9621000/latest";const OMDB_API_KEY = "3d1b92ef";let movies = [];let correctPassword = "";let passwordLoaded = false;/* POBIERANIE HASŁA */async function loadPassword() {    try {        const res = await fetch(PASSWORD_URL, {            headers: { "X-Master-Key": MASTER_KEY }        });        const data = await res.json();        correctPassword = data.record[1].haslo;        passwordLoaded = true;    } catch (e) {        console.log("Błąd ładowania hasła:", e);    }}/* LOGOWANIE */async function checkPassword() {    if (!passwordLoaded) {        alert("Hasło jeszcze się ładuje, spróbuj ponownie za chwilę.");        return;    }    const input = document.getElementById("passwordInput").value;    if (input === correctPassword) {        localStorage.setItem("logged", "true");        document.getElementById("login").style.display = "none";        document.getElementById("app").style.display = "block";        loadMovies();    } else {        document.getElementById("loginError").style.display = "block";    }}/* AUTO-LOGIN */window.addEventListener("load", () => {    loadPassword(); // zaczynamy ładować hasło od razu    if (localStorage.getItem("logged") === "true") {        document.getElementById("login").style.display = "none";        document.getElementById("app").style.display = "block";        loadMovies();    }});/* POBIERANIE FILMÓW + OMDB (bez crashowania) */async function loadMovies() {    try {        const res = await fetch(MOVIES_URL, {            headers: { "X-Master-Key": MASTER_KEY }        });        const data = await res.json();        // zabezpieczenie przed różnymi formatami JSONBin        movies = Array.isArray(data.record) ? data.record : Object.values(data.record);        // pobieramy OMDb dla wszystkich filmów równolegle        await Promise.all(            movies.map(async movie => {                try {                    if (!movie.titleEn) return;                    const omdb = await fetch(                        `https://www.omdbapi.com/?t=${encodeURIComponent(movie.titleEn)}&apikey=${OMDB_API_KEY}`                    );                    const info = await omdb.json();                    if (info.Response === "False") {                        movie.year = "—";                        movie.duration = "—";                        movie.rating = "—";                        movie.category = movie.category || "Inne";                        return;                    }                    movie.year = info.Year || "—";                    movie.duration = info.Runtime ? info.Runtime.replace(" min", "") : "—";                    movie.rating = info.imdbRating || "—";                    movie.category = movie.category || (info.Genre ? info.Genre.split(",")[0] : "Inne");                } catch (err) {                    console.log("Błąd OMDb:", err);                }            })        );        renderCategories();    } catch (err) {        console.log("Błąd ładowania filmów:", err);    }}/* RENDEROWANIE KATEGORII */function renderCategories() {    const content = document.getElementById("content");    content.innerHTML = "";    const categories = [...new Set(movies.map(m => m.category || "Inne"))];    categories.forEach(cat => {        const section = document.createElement("div");        section.className = "category";        section.innerHTML = `<h2>${cat}</h2>`;        const grid = document.createElement("div");        grid.className = "movie-grid";        movies            .filter(m => (m.category || "Inne") === cat)            .forEach((movie, index) => {                const div = document.createElement("div");                div.className = "movie";                div.innerHTML = `                    <img src="${movie.imageUrl}">                    <div class="info">                        <p><strong>${movie.title}</strong></p>                        <p>${movie.year || "—"} • ${movie.duration || "—"} min</p>                        <p class="rating">⭐ ${movie.rating || "—"}</p>                    </div>                `;                div.onclick = () => openMovie(index);                grid.appendChild(div);            });        section.appendChild(grid);        content.appendChild(section);    });}function openMovie(id) {    window.location.href = "film.html?id=" + id;}/* WYSZUKIWARKA */document.getElementById("searchInput").addEventListener("input", e => {    const filter = e.target.value.toLowerCase();    const filtered = movies.filter(m => m.title.toLowerCase().includes(filter));    if (filter === "") {        renderCategories();        return;    }    const content = document.getElementById("content");    content.innerHTML = `<h2>Wyniki wyszukiwania</h2>`;    const grid = document.createElement("div");    grid.className = "movie-grid";    filtered.forEach((movie, index) => {        const div = document.createElement("div");        div.className = "movie";        div.innerHTML = `            <img src="${movie.imageUrl}">            <div class="info">                <p><strong>${movie.title}</strong></p>                <p>${movie.year || "—"} • ${movie.duration || "—"} min</p>                <p class="rating">⭐ ${movie.rating || "—"}</p>            </div>        `;        div.onclick = () => openMovie(index);        grid.appendChild(div);    });    content.appendChild(grid);});</script></body></html>